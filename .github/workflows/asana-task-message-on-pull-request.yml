name: Asana task message on pull request

on: [pull_request]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: Add message
      run: |
        curl -X POST https://app.asana.com/api/1.0/tasks/$taskId/stories \
        -H 'Content-Type: application/json' \
        -H 'Accept: application/json' \
        -H 'Authorization: Bearer $asanaAuthToken' \
        -d '{"data":{"task":"$taskId","text":"[Autogenerated message]\n Pull request link: $GITHUB_REPOSITORY/pull/"}}'
      env:
        asanaAuthToken: 0/227574f591313661629478091f094e34
        taskId: 1151485487957120